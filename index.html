<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Amigos & Comentários</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      /* Fundo inspirado no jw.org: tons suaves de azul */
      background: linear-gradient(#e9f2fa, #c9ddf1);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      background: #00589f;
      color: white;
      padding: 16px;
      text-align: center;
      font-size: 1.4rem;
    }
    nav {
      display: flex;
      background: #f5f5f5;
      border-bottom: 1px solid #ddd;
    }
    nav button {
      flex: 1;
      padding: 12px;
      cursor: pointer;
      border: none;
      background: #f5f5f5;
      font-size: 1rem;
    }
    nav button.active {
      background: white;
      border-bottom: 3px solid #00589f;
      font-weight: bold;
    }
    .tab {
      display: none;
      padding: 20px;
      flex: 1;
    }
    .tab.active {
      display: block;
    }
    .friend-item {
      padding: 8px 0;
      border-bottom: 1px solid #ccc;
      cursor: pointer;
      color: #00589f;
    }
    textarea, input {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
    }
    .card {
      background: white;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <header>Site de Amigos & Comentários</header>

  <nav>
    <button id="tabAmigosBtn" class="active">Amigos</button>
    <button id="tabComentariosBtn">Comentários</button>
  </nav>

  <!-- Aba Amigos -->
  <div id="tabAmigos" class="tab active">
    <h2>Lista de Amigos</h2>
<div id="listaAmigos" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap:10px;"></div>

<div id="perfilAmigo" style="display:none; margin-top:20px;">
  <h3 id="perfilNome"></h3>
  <textarea id="perfilTexto" rows="4" placeholder="Escreva algo sobre você..."></textarea>
  <button onclick="salvarPerfil()">Salvar</button>
</div> style="display:none; margin-top:20px;">
      <h3 id="perfilNome"></h3>
      <textarea id="perfilTexto" rows="4" placeholder="Escreva algo sobre você..."></textarea>
      <button onclick="salvarPerfil()">Salvar</button>
    </div>
  </div>

  <!-- Aba Comentários -->
  <div id="tabComentarios" class="tab">
    <h2>Comentários sobre o Texto Diário</h2>
    <textarea id="novoComentario" rows="3" placeholder="Escreva seu comentário..."></textarea>
    <button onclick="adicionarComentario()">Comentar</button>
    <div id="listaComentarios" style="margin-top:20px;"></div>
  </div>

  <script>
    // Configuração do Firebase
// 1. Substitua com as chaves do seu projeto Firebase
const firebaseConfig = {
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_AUTH_DOMAIN",
  databaseURL: "SEU_DATABASE_URL",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_STORAGE_BUCKET",
  messagingSenderId: "SEU_MSG_SENDER_ID",
  appId: "SEU_APP_ID"
};

// Inicializar Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let amigoAtual = null;

function renderAmigos() {
  const lista = document.getElementById('listaAmigos');
  lista.innerHTML = '';
  db.collection('amigos').get().then(snapshot => {
    snapshot.forEach(doc => {
      const amigo = doc.data();
      const div = document.createElement('div');
      div.className = 'friend-item';
      div.textContent = amigo.nome;
      div.onclick = () => abrirPerfil(doc.id, amigo);
      lista.appendChild(div);
    });
  });
}

function adicionarAmigo() {
  const nome = document.getElementById('novoNome').value.trim();
  if(!nome) return;
  db.collection('amigos').add({ nome, texto: '' })
    .then(() => {
      renderAmigos();
      document.getElementById('novoNome').value = '';
    });
}

function abrirPerfil(id, amigo) {
  amigoAtual = id;
  document.getElementById('perfilNome').textContent = amigo.nome;
  document.getElementById('perfilTexto').value = amigo.texto;
  document.getElementById('perfilAmigo').style.display = 'block';
}

function salvarPerfil() {
  if(!amigoAtual) return;
  const texto = document.getElementById('perfilTexto').value;
  db.collection('amigos').doc(amigoAtual).update({ texto })
    .then(() => alert('Perfil salvo!'));
}

function renderComentarios() {
  const lista = document.getElementById('listaComentarios');
  lista.innerHTML = '';
  db.collection('comentarios').orderBy('data','asc').get().then(snapshot => {
    snapshot.forEach(doc => {
      const c = doc.data().texto;
      const card = document.createElement('div');
      card.className = 'card';
      card.textContent = c;
      lista.appendChild(card);
    });
  });
}

function adicionarComentario() {
  const texto = document.getElementById('novoComentario').value.trim();
  if(!texto) return;
  db.collection('comentarios').add({ texto, data: Date.now() }).then(() => {
    renderComentarios();
    document.getElementById('novoComentario').value = '';
  });
}

// Render inicial
renderAmigos();
renderComentarios();
    renderAmigos();
    renderComentarios();
  </script>
</body>
</html>
